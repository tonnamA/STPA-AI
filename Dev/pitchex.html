<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>ไฮไลต์คำผิด</title>
  <style>
    .highlight {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h3>ข้อความต้นฉบับ:</h3>
  <div id="text">คน คนบ คน</div>

  <script>
    fetch("http://localhost:8000/get_text")
      .then(res => res.json())
      .then(data => {
        const wrongIndexes = data.wrong_indexes;
        const textDiv = document.getElementById("text");

        const originalText = textDiv.textContent;

        // แยกคำโดยเก็บช่องว่างไว้ (เพื่อไม่ให้ format หาย)
        const words = originalText.split(/(\s+)/);  // [คำ, ช่องว่าง, คำ, ช่องว่าง, คำ]
        
        let wordIndex = 0;
        const result = words.map(word => {
          if (word.trim() === "") {
            return word; // ช่องว่าง
          }

          const htmlWord = wrongIndexes.includes(wordIndex)
            ? `<span class="highlight">${word}</span>`
            : word;

          wordIndex += 1;
          return htmlWord;
        }).join("");

        textDiv.innerHTML = result;
      });
  </script>

</body>
</html>
